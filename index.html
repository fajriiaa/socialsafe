<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beranda - SociSafe</title>
    <link rel="icon" type="image/png" href="assets/images/profil/ikonsocisafe.png">
    <link rel="stylesheet" href="styles/intro.css">
    <link rel="stylesheet" href="styles/scrollbar.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>

    
    <div class="container">
        <header class="header">
            <div class="logo">
                <i class="fas fa-gamepad"></i>
                <span>EDUCATION GAMES</span>
            </div>
            <nav class="nav">
                <a href="#home" class="nav-link active">Beranda</a>
                <a href="#about" class="nav-link">Tentang</a>
                <a href="#features" class="nav-link">Fitur</a>
                <a href="#leaderboard" class="nav-link">Papan Peringkat</a>
            </nav>
        </header>

        <main class="main-content">
            <section id="home" class="hero-section">
                <div class="hero-content">
                    <div class="game-title">
                        <h1 class="title-main">SOCIAL SAFE</h1>
                        <div class="title-subtitle">Board Game Education</div>
                    </div>
                    
                    <div class="hero-description">
                        <p>Selamat datang di Social Safe Board Game Education! Sebuah permainan edukasi bertema keamanan siber, jelajahi dan hadapi berbagai tantangan seputar ancaman siber di media sosial. Asah pengetahuanmu, tingkatkan kewaspadaan, dan jadilah pemenang yang cerdas di dunia digital!</p>
                    </div>

                    <div class="cta-buttons">
                        <button class="btn btn-primary" id="playBtn">
                            <i class="fas fa-play"></i>
                            MULAI PETUALANGAN
                        </button>
                        <button class="btn btn-secondary" id="trailerBtn">
                            <i class="fas fa-video"></i>
                            TONTON TRAILER
                        </button>
                    </div>

                    <div class="hero-stats">
                        <div class="stat-item">
                            <div class="stat-number">40</div>
                            <div class="stat-label">Kotak</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">10+</div>
                            <div class="stat-label">Mini Game Edukasi</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">100%</div>
                            <div class="stat-label">Seru & Bermanfaat</div>
                        </div>
                    </div>
                </div>

                <div class="hero-visual">
                    <div class="character-container">
                        <img src="assets/images/profil/socialsafe.png" alt="Social Safe" class="hero-main-image">
                        <!-- Floating elements dihapus -->
                    </div>
                </div>
            </section>

            <section id="about" class="about-section">
                <div class="section-header">
                    <h2>Tentang Game</h2>
                    <p>Kenali konsep dan tujuan Social Safe Board Game Education</p>
                </div>
                
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <h3>Edukasi</h3>
                        <p>Pelajari cara menghadapi ancaman siber di media sosial melalui tantangan interaktif di setiap langkah.</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-dice"></i>
                        </div>
                        <h3>Board Game Interaktif</h3>
                        <p>Jelajahi papan petualangan, lempar dadu, gerakkan avatarmu, dan hadapi berbagai kejutan di setiap langkah.</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-puzzle-piece"></i>
                        </div>
                        <h3>Mini Game & Tantangan</h3>
                        <p>Setiap kotak menyimpan misi unik, uji seberapa sigap kamu dalam mengidentifikasi dan mengambil keputusan untuk tetap aman di dunia maya.</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <h3>Bersaing di Papan Peringkat</h3>
                        <p>Bersaing secara individu untuk meraih posisi terbaik di papan peringkat!</p>
                    </div>
                </div>
            </section>

            <section id="features" class="features-section">
                <div class="section-header">
                    <h2>Fitur Unggulan</h2>
                    <p>Fitur-fitur utama yang membuat Social Safe Board Game Education unik dan bermanfaat</p>
                </div>
                
                <div class="features-showcase">
                    <div class="feature-showcase-item">
                        <div class="feature-image">
                            <div class="placeholder-image">🎲</div>
                        </div>
                        <div class="feature-content">
                            <h3>Papan Permainan Edukatif</h3>
                            <p>Papan permainan didesain memutar, dengan berbagai kotak berisi edukasi dan tantangan nyata seputar keamanan siber.</p>
                            <ul>
                                <li>Desain papan menarik & interaktif</li>
                                <li>Setiap kotak = tantangan/kuis/mini game</li>
                                <li>Belajar sambil bermain</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="feature-showcase-item reverse">
                        <div class="feature-image">
                            <div class="placeholder-image">🔒</div>
                        </div>
                        <div class="feature-content">
                            <h3>Konten Edukasi Siber</h3>
                            <p>Materi dan tantangan diambil dari kasus nyata, tips keamanan, serta edukasi ancaman siber yang sering terjadi di media sosial.</p>
                            <ul>
                                <li>Simulasi ancaman siber</li>
                                <li>Tips & trik aman bermedia sosial</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Leaderboard Section Start -->
            <section id="leaderboard" class="leaderboard-section">
                <div class="section-header">
                    <h2>Papan Peringkat</h2>
                    <p>Lihat siapa yang menjadi juara Social Safe Board Game Education!</p>
                </div>
                <div class="leaderboard-wrapper">
                    <!-- Tabel Peringkat -->
                    <div class="leaderboard-table-container">
                        <!-- Kontrol Show Entries dan Search -->
                        <div class="leaderboard-controls">
                            <!-- Hapus show entries, hanya search -->
                            <div class="search-box">
                                <label for="searchInput">Pencarian:</label>
                                <input type="text" id="searchInput" class="search-input" placeholder="" title="Ketik nama pemain untuk mencari">
                            </div>
                        </div>
                        
                        <table class="leaderboard-table">
                            <thead>
                                <tr>
                                    <th>Peringkat</th>
                                    <th>Nama</th>
                                    <th>Skor</th>
                                    <th>Waktu</th>
                                </tr>
                            </thead>
                            <tbody id="leaderboardBody">
                                <!-- Data akan dimuat secara dinamis dari database -->
                                <tr>
                                    <td colspan="4" style="text-align: center; padding: 20px; color: #ccc;">
                                        <i class="fas fa-spinner fa-spin"></i> Memuat data...
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
            <!-- Leaderboard Section End -->

            <footer class="footer">
                <div class="footer-content">
                    <div class="footer-section">
                        <h4>Game Studio</h4>
                        <p>Menciptakan pengalaman gaming terbaik untuk pemain di seluruh dunia.</p>
                    </div>
                    <div class="footer-section">
                        <h4>Links</h4>
                        <ul>
                            <li><a href="#home">Beranda</a></li>
                            <li><a href="#about">Tentang</a></li>
                            <li><a href="#features">Fitur</a></li>
                            <li><a href="#leaderboard">Papan Peringkat</a></li>
                        </ul>
                    </div>
                    <div class="footer-section">
                        <h4>Bagikan</h4>
                        <div class="footer-social-links">
                            <a href="#" title="Instagram" target="_blank"><i class="fab fa-instagram"></i></a>
                            <a href="#" title="WhatsApp" target="_blank"><i class="fab fa-whatsapp"></i></a>
                            <a href="#" title="Telegram" target="_blank"><i class="fab fa-telegram-plane"></i></a>
                        </div>
                    </div>
                </div>
                <div class="footer-bottom">
                    <p>Politeknik Siber dan Sandi Negara. 2025.</p>
                </div>
            </footer>
        </main>

        <!-- Modal untuk trailer -->
        <div id="trailerModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <div class="video-placeholder">
                    <i class="fas fa-play-circle"></i>
                    <p>Trailer Game Akan Segera Hadir!</p>
                </div>
            </div>
        </div>

        <div class="loading-overlay" id="loadingOverlay">
            <div class="loading-content">
                <div class="loading-title">
                    <span class="loading-geometry">SOCIAL SAFE</span><br>
                    <span class="loading-vibes">BOARD GAME</span><br>
                    <span class="loading-monster">EDUCATION</span>
                </div>
                <div class="loading-bar">
                    <div class="loading-progress" id="loadingProgress"></div>
                </div>
            </div>
        </div>

        <script src="scripts/intro.js"></script>
        
        <!-- Script untuk memuat data papan peringkat dari database -->
        <script>
            // Variabel global untuk data leaderboard
            let allLeaderboardData = [];
            let filteredLeaderboardData = [];
            let allPlayersData = []; // Data untuk search (semua player)
            
            // Fungsi untuk memuat data papan peringkat
            async function loadLeaderboard() {
                try {
                    const response = await fetch('api/get_leaderboard.php');
                    const data = await response.json();
                    
                    if (data.success) {
                        allLeaderboardData = data.leaderboard;
                        filteredLeaderboardData = [...allLeaderboardData];
                        displayLeaderboard(filteredLeaderboardData);
                    } else {
                        console.error('Gagal memuat data papan peringkat:', data.error);
                        showError('Gagal memuat data papan peringkat');
                    }
                } catch (error) {
                    console.error('Error:', error);
                    showError('Terjadi kesalahan saat memuat data');
                }
            }
            
            // Fungsi untuk memuat semua data player untuk search
            async function loadAllPlayers() {
                try {
                    const response = await fetch('api/search_players.php');
                    const data = await response.json();
                    
                    if (data.success) {
                        allPlayersData = data.players;
                        console.log('Loaded', allPlayersData.length, 'players for search');
                    } else {
                        console.error('Gagal memuat data player untuk search:', data.error);
                    }
                } catch (error) {
                    console.error('Error loading search data:', error);
                }
            }
            
            // Fungsi untuk menampilkan data papan peringkat
            function displayLeaderboard(leaderboard) {
                const tbody = document.getElementById('leaderboardBody');
                const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();
                
                if (leaderboard.length === 0) {
                    tbody.innerHTML = `
                        <tr>
                            <td colspan="4" style="text-align: center; padding: 20px; color: #ccc;">
                                Belum ada data pemain
                            </td>
                        </tr>
                    `;
                    return;
                }
                
                console.log('Displaying leaderboard with', leaderboard.length, 'entries');
                console.log('Search term:', searchTerm);
                
                // Tampilkan semua data (tanpa pembatasan jumlah entri)
                tbody.innerHTML = leaderboard.map((player, index) => {
                    // Gunakan peringkat asli jika ada search term,否则 gunakan index + 1
                    const rank = searchTerm ? player.peringkat_asli : (index + 1);
                    let medal = '';
                    let rankClass = '';
                    
                    if (rank === 1) {
                        medal = '<span class="medal medal-gold">🥇</span> ';
                        rankClass = 'rank-1';
                    } else if (rank === 2) {
                        medal = '<span class="medal medal-silver">🥈</span> ';
                        rankClass = 'rank-2';
                    } else if (rank === 3) {
                        medal = '<span class="medal medal-bronze">🥉</span> ';
                        rankClass = 'rank-3';
                    }
                    
                    console.log(`Player: ${player.nama}, Original Rank: ${player.peringkat_asli}, Displayed Rank: ${rank}`);
                    
                    return `
                        <tr class="${rankClass}">
                            <td>${medal}${rank}</td>
                            <td>${player.nama}</td>
                            <td>${player.poin}</td>
                            <td>${player.waktu_formatted}</td>
                        </tr>
                    `;
                }).join('');
            }
            
            // Fungsi untuk filter berdasarkan search
            function filterLeaderboard() {
                const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();
                
                if (searchTerm === '') {
                    // Jika tidak ada search term, tampilkan leaderboard normal (10 besar)
                    filteredLeaderboardData = [...allLeaderboardData];
                    console.log('Showing normal leaderboard (10 besar)');
                } else {
                    // Jika ada search term, cari di semua data player
                    filteredLeaderboardData = allPlayersData.filter(player => 
                        player.nama.toLowerCase().includes(searchTerm)
                    );
                    console.log('Search results:', filteredLeaderboardData.length, 'players found');
                    console.log('Sample player with original rank:', filteredLeaderboardData[0]);
                }
                
                displayLeaderboard(filteredLeaderboardData);
                
                // Tambahkan feedback visual
                const searchInput = document.getElementById('searchInput');
                if (searchTerm !== '') {
                    searchInput.style.borderColor = 'var(--primary-color)';
                    searchInput.style.boxShadow = '0 0 0 2px rgba(0, 212, 255, 0.2)';
                } else {
                    searchInput.style.borderColor = 'rgba(0, 212, 255, 0.2)';
                    searchInput.style.boxShadow = 'none';
                }
            }
            
            // Debounce function untuk search
            function debounce(func, wait) {
                let timeout;
                return function executedFunction(...args) {
                    const later = () => {
                        clearTimeout(timeout);
                        func(...args);
                    };
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                };
            }
            
            // Event listeners
            document.addEventListener('DOMContentLoaded', function() {
                loadLeaderboard();
                loadAllPlayers(); // Memuat data player untuk search
                
                // Event listener untuk search dengan debouncing
                const searchInput = document.getElementById('searchInput');
                const debouncedFilter = debounce(filterLeaderboard, 300);
                searchInput.addEventListener('input', debouncedFilter);
                searchInput.addEventListener('keyup', debouncedFilter);
                
                // Event listener untuk escape key untuk clear search
                searchInput.addEventListener('keydown', function(e) {
                    if (e.key === 'Escape') {
                        this.value = '';
                        filterLeaderboard();
                        this.blur();
                    }
                });
                
                // Tambahkan placeholder yang dinamis
                searchInput.placeholder = 'Cari nama pemain...';
                
                // Tambahkan efek focus untuk search input
                searchInput.addEventListener('focus', function() {
                    this.style.transform = 'translateY(-1px)';
                    this.style.boxShadow = '0 2px 8px rgba(0, 212, 255, 0.2)';
                });
                
                searchInput.addEventListener('blur', function() {
                    this.style.transform = 'translateY(0)';
                    if (!this.value) {
                        this.style.boxShadow = 'none';
                    }
                });
            });
            
            // Fungsi untuk menampilkan error
            function showError(message) {
                const tbody = document.getElementById('leaderboardBody');
                tbody.innerHTML = `
                    <tr>
                        <td colspan="4" style="text-align: center; padding: 20px; color: #ff6b6b;">
                            <i class="fas fa-exclamation-triangle"></i> ${message}
                        </td>
                    </tr>
                `;
            }
        </script>
    </div>
</body>
</html> 